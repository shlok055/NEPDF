<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Event Detail</title>
<script src="https://cdn.tailwindcss.com"></script>
<style>
  .fade-in { animation: fadeIn 0.8s ease-in-out; }
  @keyframes fadeIn { 0% {opacity:0;} 100%{opacity:1;} }
</style>
</head>
<body class="bg-gray-50 text-gray-900">

<div class="max-w-4xl mx-auto mt-20 p-8 bg-white rounded-xl shadow-lg fade-in" id="eventDetail"></div>

<script>
const SHEET_API_URL = "https://script.google.com/macros/s/AKfycbyl_Ck04bPcSVXxttljgNbWsJmksqVR4T0P7pN_PeCPx-uuZs63tPT9c1srJ_ulyH3k1g/exec?action=getEventById"; // Apps Script URL

async function loadEvent(){
  const urlParams = new URLSearchParams(window.location.search);
  const eventId = urlParams.get("id");
  if(!eventId) return;

  try {
    const res = await fetch(`${SHEET_API_URL}&id=${eventId}`);
    const event = await res.json();

    if(!event) return;

    let mediaHtml = "";
    if(event.imageUrl && event.videoUrl){
      mediaHtml = `
        <div class="space-y-4">
          <img src="${event.imageUrl}" class="w-full rounded-lg object-cover">
          <video src="${event.videoUrl}" controls class="w-full rounded-lg"></video>
        </div>`;
    } else if(event.imageUrl){
      mediaHtml = `<img src="${event.imageUrl}" class="w-full rounded-lg object-cover">`;
    } else if(event.videoUrl){
      mediaHtml = `<video src="${event.videoUrl}" controls class="w-full rounded-lg"></video>`;
    }

    document.getElementById("eventDetail").innerHTML = `
      <h2 class="text-3xl font-bold mb-4">${event.title}</h2>
      <p class="text-gray-600 mb-2">${new Date(event.date).toDateString()}</p>
      <p class="text-gray-700 mb-6">${event.location || ""}</p>
      ${mediaHtml}
      <p class="mt-6 text-gray-800">${event.description}</p>
    `;
  } catch(err){
    console.error("Failed to load event detail:", err);
  }
}

loadEvent();
</script>
</body>
</html>
